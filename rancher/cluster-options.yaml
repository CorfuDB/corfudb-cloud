#
# Cluster Config -- This should be set as a yaml config for the cluster after you choose 'Custom' cloud provider.
#
docker_root_dir: /var/lib/docker
enable_cluster_alerting: false
enable_cluster_monitoring: false
enable_network_policy: false
local_cluster_auth_endpoint:
  enabled: true
name: corfu-metrics-cluster
#
# Rancher Config
#
rancher_kubernetes_engine_config:
  addon_job_timeout: 30
  authentication:
    strategy: x509
  ignore_docker_version: true
  cloud_provider:
    name: vsphere                           # Should be vsphere
    vsphereCloudProvider:
      global:
        insecure-flag: true                  # Should be set to true (self-signed certs)
      virtual_center:
        127.0.0.1:                           # IP of a virtual center
          user: admin                        # User to Admin VSphere
          password: pass                     # Pass to Admin VSphere
          port: 443                          # 443 for https
          datacenters: your-data-center      # Name of a data center
      workspace:
          server: 127.0.0.1                   # IP of a virtual center
          datacenter: your-data-center        # Name of a data center
          folder: /                           # Leave it as a forward slash
          default-datastore: your-data-store  # Storage in the data center
  #
  # # Currently only nginx ingress provider is supported.
  # # To disable ingress controller, set `provider: none`
  # # To enable ingress on specific nodes, use the node_selector, eg:
  #    provider: nginx
  #    node_selector:
  #      app: ingress
  #
  ingress:
    provider: nginx
  kubernetes_version: v1.17.3-rancher1-1
  monitoring:
    provider: metrics-server
  #
  #   If you are using calico on AWS
  #
  #    network:
  #      plugin: calico
  #      calico_network_provider:
  #        cloud_provider: aws
  #
  # # To specify flannel interface
  #
  #    network:
  #      plugin: flannel
  #      flannel_network_provider:
  #      iface: eth1
  #
  # # To specify flannel interface for canal plugin
  #
  #    network:
  #      plugin: canal
  #      canal_network_provider:
  #        iface: eth1
  #
  network:
    mtu: 0
    options:
      flannel_backend_type: vxlan
    plugin: canal
  #
  #    services:
  #      kube-api:
  #        service_cluster_ip_range: 10.43.0.0/16
  #      kube-controller:
  #        cluster_cidr: 10.42.0.0/16
  #        service_cluster_ip_range: 10.43.0.0/16
  #      kubelet:
  #        cluster_domain: cluster.local
  #        cluster_dns_server: 10.43.0.10
  #
  services:
    etcd:
      backup_config:
        enabled: true
        interval_hours: 12
        retention: 6
        safe_timestamp: false
      creation: 12h
      extra_args:
        election-timeout: 5000
        heartbeat-interval: 500
      gid: 0
      retention: 72h
      snapshot: false
      uid: 0
    kube_api:
      always_pull_images: false
      pod_security_policy: false
      service_node_port_range: 30000-32767
  ssh_agent_auth: false
windows_prefered_cluster: false
