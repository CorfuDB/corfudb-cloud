# -----------------
# https://blogs.oracle.com/poonam/understanding-g1-gc-logs
# -----------------
input {
  stdin {
    codec => multiline {
      pattern => "^(\*)"
      negate => true
      what => "previous"
    }
    tags => [
      "io-stat"
    ]
  }
}

filter {
    grok {
      patterns_dir => "/usr/share/logstash/patterns"
      match => {"message" => "%{GREEDYDATA:msg}\n%{MONTHNUM:month}/%{BASE10NUM:day}/%{YEAR:year} %{HOUR:hours}:%{MINUTE:minutes}:%{SECOND:seconds} %{WORD:time_of_day}\navg-cpu:  %{GREEDYDATA:avg_cpu_columns}\n[\s]+%{GREEDYDATA:avg_cpu_data}\n[\n]+D%{GREEDYDATA:stat_cols}\ns%{GREEDYDATA:stat_data}\n[\n]+T%{GREEDYDATA:rest}"}
    }
}
